{"version":3,"file":"royal-caribbean-demo.min.js","sources":["../../node_modules/tslib/tslib.es6.mjs","../../src/room/RoomDetailsController.ts","../../src/room/RoomBoardController.ts","../../src/room/RoomAspectTrait.ts","../../src/room/RoomEntityTrait.ts","../../src/room/RoomsRelationTrait.ts","../../src/types.ts","../../src/deck/RoomController.ts","../../src/deck/RoomListController.ts","../../src/deck/DeckBoardController.ts","../../src/deck/DeckAspectTrait.ts","../../src/deck/DeckEntityTrait.ts","../../src/deck/DecksRelationTrait.ts","../../src/ship/ShipAspectTrait.ts","../../src/ship/ShipEntityTrait.ts"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { PanelView } from \"@swim/panel\";\nimport { TimeTableController } from \"@nstream/widget\";\nimport { View, ViewRef } from \"@swim/view\";\nimport { ValueDownlink } from \"@swim/client\";\nimport { Value } from \"@swim/structure\";\nimport { TraitViewRef } from \"@swim/controller\";\nimport { Trait } from \"@swim/model\";\nimport { HtmlView } from \"@swim/dom\";\nimport { Property } from \"@swim/component\";\n\n/** @public */\nexport class RoomDetailsController extends TimeTableController {\n  constructor() {\n    super();\n    this.initView();\n  }\n\n  initView() {\n    this.panel.insertView();\n  }\n\n  @ViewRef({\n    viewType: HtmlView,\n    extends: true,\n    get parentView(): View | null | undefined {\n      return this.owner.panel.attachView();\n    },\n    createView(): HtmlView {\n      const divView = new HtmlView(document.createElement(\"div\")).set({\n        style: {\n          margin: 24,\n        },\n        classList: [\"rbc-details-container\"],\n      });\n\n      const shipCodeView = divView.appendChild(\"p\").set({\n        style: {\n          marginTop: 12,\n          marginBottom: 12,\n          fontSize: 16,\n          fontFamily: \"sans-serif\",\n        },\n      });\n      shipCodeView.node.innerText = `Ship code: ${this.owner.shipCode.value.valueOf()}`;\n\n      const deckNumberView = divView.appendChild(\"p\").set({\n        style: {\n          marginTop: 12,\n          marginBottom: 12,\n          fontSize: 16,\n          fontFamily: \"sans-serif\",\n        },\n      });\n      deckNumberView.node.innerText = `Deck number: ${this.owner.deckNumber.value.valueOf()}`;\n\n      const roomNumberView = divView.appendChild(\"p\").set({\n        style: {\n          marginTop: 12,\n          marginBottom: 12,\n          fontSize: 16,\n          fontFamily: \"sans-serif\",\n        },\n      });\n      roomNumberView.node.innerText = `Room number: ${this.owner.roomNumber.value.valueOf()}`;\n\n      const hvacUnitView = divView.appendChild(\"p\").set({\n        style: {\n          marginTop: 12,\n          marginBottom: 12,\n          fontSize: 16,\n          fontFamily: \"sans-serif\",\n        },\n      });\n      hvacUnitView.node.innerText = `HVAC unit: ${this.owner.hvacUnit.value.valueOf()}`;\n\n      const hvacZoneView = divView.appendChild(\"p\").set({\n        style: {\n          marginTop: 12,\n          marginBottom: 12,\n          fontSize: 16,\n          fontFamily: \"sans-serif\",\n        },\n      });\n      hvacZoneView.node.innerText = `HVAC zone: ${this.owner.hvacZone.value.valueOf()}`;\n\n      return divView;\n    },\n  })\n  readonly detailsContainer!: ViewRef<this, HtmlView>;\n\n  @Property({\n    valueType: String,\n    value: \"\",\n  })\n  readonly shipCode!: Property<this, String>;\n\n  @Property({\n    valueType: String,\n    value: \"\",\n  })\n  readonly deckNumber!: Property<this, String>;\n\n  @Property({\n    valueType: String,\n    value: \"\",\n  })\n  readonly roomNumber!: Property<this, String>;\n\n  @Property({\n    valueType: String,\n    value: \"\",\n  })\n  readonly hvacUnit!: Property<this, String>;\n\n  @Property({\n    valueType: String,\n    value: \"\",\n  })\n  readonly hvacZone!: Property<this, String>;\n\n  @ValueDownlink({\n    hostUri: \"warp://localhost:9001\",\n    laneUri: \"info\",\n    consumed: true,\n    didSet(value: Value): void {\n      if (!this.owner.panel.view?.getChild(\"detailsContainer\", HtmlView)) {\n        this.owner.shipCode.setValue(value.get(\"shipCode\").stringValue(\"\"));\n        this.owner.deckNumber.setValue(value.get(\"deckNumber\").stringValue(\"\"));\n        this.owner.roomNumber.setValue(value.get(\"roomNumber\").stringValue(\"\"));\n        this.owner.hvacUnit.setValue(value.get(\"hvacUnit\").stringValue(\"\"));\n        this.owner.hvacZone.setValue(value.get(\"hvacZone\").stringValue(\"\"));\n\n        this.owner.detailsContainer.insertView(this.owner.panel.attachView());\n      }\n    },\n  })\n  readonly infoDownlink!: ValueDownlink<this>;\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Trait, TraitRef } from \"@swim/model\";\nimport { TraitViewRef } from \"@swim/controller\";\nimport { PanelView, BoardView, BoardController } from \"@swim/panel\";\nimport { EntityTrait } from \"@nstream/domain\";\nimport { View, ViewRef } from \"@swim/view\";\nimport { HtmlView } from \"@swim/dom\";\nimport { ValueDownlink } from \"@swim/client\";\nimport { Value } from \"@swim/structure\";\nimport { RoomDetailsController } from \"./RoomDetailsController\";\nimport { RoomListController } from \"../deck/RoomListController\";\n\n/** @public */\nexport class RoomBoardController extends BoardController {\n  constructor() {\n    super();\n    this.initBoard();\n  }\n\n  protected initBoard(): void {\n    const boardView = this.sheet.insertView();\n    const rootPanelView = this.panel.insertView();\n\n    const roomDetailsController = this.appendChild(\n      RoomDetailsController,\n      \"roomDetailsController\"\n    );\n    roomDetailsController.panel.insertView(rootPanelView);\n  }\n\n  @TraitViewRef({\n    extends: true,\n    viewDidMount(boardView: BoardView): void {\n      this.owner.consume(boardView);\n    },\n    viewWillUnmount(boardView: BoardView): void {\n      this.owner.unconsume(boardView);\n    },\n  })\n  override readonly sheet!: TraitViewRef<this, Trait, BoardView> &\n    BoardController[\"sheet\"];\n\n  @ViewRef({\n    viewType: PanelView,\n    extends: true,\n    get parentView(): View | null | undefined {\n      return this.owner.sheet.attachView();\n    },\n    createView(): PanelView {\n      return PanelView.create().set({\n        style: {\n          margin: 6,\n          backgroundColor: \"#212121\",\n        },\n        classList: [\"room-board-controller\"],\n      });\n    },\n  })\n  readonly panel!: ViewRef<this, PanelView>;\n\n  @TraitRef({\n    traitType: EntityTrait,\n    inherits: true,\n    initTrait(entityTrait: EntityTrait): void {\n      this.owner.hostUri.bindInlet(entityTrait.hostUri);\n      this.owner.nodeUri.bindInlet(entityTrait.nodeUri);\n    },\n  })\n  readonly entity!: TraitRef<this, EntityTrait>;\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Lazy } from \"@swim/util\";\nimport type { Graphics } from \"@swim/graphics\";\nimport { VectorIcon } from \"@swim/graphics\";\nimport type { SheetController } from \"@swim/sheet\";\nimport { AspectTrait } from \"@nstream/domain\";\nimport { RoomBoardController } from \"./RoomBoardController\";\n\n/** @public */\nexport class RoomAspectTrait extends AspectTrait {\n  constructor() {\n    super();\n    this.id.setIntrinsic(\"portal\");\n    this.title.setIntrinsic(\"Portal\");\n    this.icon.setIntrinsic(RoomAspectTrait.icon);\n  }\n\n  // Define the board controller to be used that will control all the widgets/cards the rooms will have\n  // We will use the 'RoomBoard' which is currently blank\n  override createTabController(): SheetController | null {\n    return new RoomBoardController();\n  }\n\n  // The icon to show the 'portal' (at the top - alternative to atlas)\n  @Lazy\n  static get icon(): Graphics {\n    return VectorIcon.create(\n      24,\n      24,\n      \"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"\n    );\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\nimport { Class, Lazy } from \"@swim/util\";\nimport { EntityTrait, EntityTraitObserver } from \"@nstream/domain\";\nimport { Graphics, PolygonIcon, VectorIcon } from \"@swim/graphics\";\nimport { Model, TraitModelRef } from \"@swim/model\";\nimport { RoomAspectTrait } from \"./RoomAspectTrait\";\n\n/** @public */\nexport interface RoomEntityTraitObserver<\n  T extends RoomEntityTrait = RoomEntityTrait\n> extends EntityTraitObserver<T> {}\n\n/** @public */\nexport class RoomEntityTrait extends EntityTrait {\n  constructor() {\n    super();\n    this.icon.setIntrinsic(RoomEntityTrait.icon);\n  }\n\n  override readonly observerType?: Class<RoomEntityTraitObserver>;\n\n  // Aspect/Portal trait showing that this entity will have a board of widgets/cards\n  @TraitModelRef({\n    modelType: Model,\n    modelKey: \"portal\",\n    traitType: RoomAspectTrait,\n    traitKey: \"aspect\",\n  })\n  readonly portal!: TraitModelRef<this, RoomAspectTrait>;\n\n  // The icon of the entity, will be used in the navigation on the left\n  @Lazy\n  static get icon(): Graphics {\n    // return PolygonIcon.create(4);\n    return VectorIcon.create(\n      40,\n      40,\n      \"M3.333,3.333L36.667,3.333L36.667,36.667L3.333,36.667Z\"\n    );\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { type Value } from \"@swim/structure\";\nimport { MapDownlink } from \"@swim/client\";\nimport { RelationTrait } from \"@nstream/domain\";\nimport { RoomEntityTrait } from \"./RoomEntityTrait\";\nimport { Numbers, Observes, Strings } from \"@swim/util\";\nimport { TraitModelSet } from \"@swim/model\";\nimport { Uri } from \"@swim/uri\";\n\n/** @public */\nexport class RoomsRelationTrait extends RelationTrait<RoomEntityTrait> {\n  constructor() {\n    super();\n    this.title.setIntrinsic(\"Rooms\");\n    this.id.setIntrinsic(\"room\");\n  }\n\n  @TraitModelSet({\n    extends: true,\n    traitType: RoomEntityTrait,\n    observesTrait: true,\n    sorted: true,\n    initTrait(roomTrait: RoomEntityTrait): void {\n      // Create the room entity\n      const roomId = roomTrait.id.value!;\n      roomTrait.title.setIntrinsic(roomId);\n      const roomTraitNodeUri = this.owner.nodeUri.value + \"/room/\" + roomId;\n      roomTrait.nodeUri.setIntrinsic(roomTraitNodeUri);\n      roomTrait.portal.insertModel();\n    },\n    compareTraits(a: RoomEntityTrait, b: RoomEntityTrait): number {\n      // Sort the deck navigation by deck number\n      return Numbers.compare(\n        Number.parseInt(a.id.value ?? \"0\"),\n        Number.parseInt(b.id.value ?? \"0\")\n      );\n    },\n  })\n  override readonly entities!: TraitModelSet<this, RoomEntityTrait> &\n    RelationTrait<RoomEntityTrait>[\"entities\"] &\n    Observes<RoomEntityTrait>;\n\n  // Open a downlink to the backend to get the map of rooms, we can use this to create the navigation list\n  // The nodeUri of the downlink is inferred from the parent (the deck)\n  @MapDownlink({\n    laneUri: \"stateRooms\",\n    keyForm: Uri.form(),\n    consumed: true,\n    didUpdate(nodeUri: Uri, status: Value): void {\n      // If there is a new room then insert it into the relation/navigation\n      let roomTrait = this.owner.entities.get(nodeUri.pathName);\n      if (roomTrait === null) {\n        roomTrait = this.owner.entities.createTrait(nodeUri.pathName);\n        roomTrait.nodeUri.set(nodeUri);\n        this.owner.entities.addTrait(roomTrait);\n      }\n    },\n    didRemove(nodeUri: Uri, status: Value): void {\n      // When an room is removed in the backend, remove it from the navigation/relation\n      this.owner.removeChild(nodeUri.pathName);\n    },\n  })\n  readonly rooms!: MapDownlink<this, Uri, Value>;\n}\n","export enum OrderType {\n  OrderA = \"A\",\n  OrderB = \"B\",\n  OrderC = \"C\",\n  Unknown = \"Unknown\",\n}\n\nexport enum RoomStatus {\n  recentlyOccupied = 'recentlyOccupied',\n  ecoMode = 'ecoMode',\n  readyForPickup = 'readyForPickup',\n  pickupCompleted = 'pickupCompleted',\n}\n\nexport type ShipStatus = Record<RoomStatus, Record<OrderType | 'total', { count: number, value: number}>>;\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Property } from \"@swim/component\";\nimport { Form, Value } from \"@swim/structure\";\nimport { MapDownlink } from \"@swim/client\";\nimport { Feel, Look } from \"@swim/theme\";\nimport type { View } from \"@swim/view\";\nimport { ViewRef } from \"@swim/view\";\nimport { CellView, LeafView } from \"@swim/table\";\nimport { TextCellView } from \"@swim/table\";\nimport { TimeSeriesController } from \"@nstream/widget\";\nimport { RoomStatus } from \"../types\";\nimport { Status } from \"@nstream/domain\";\n\n/** @public */\nexport class RoomController extends TimeSeriesController {\n  readonly deckNumber: string;\n  readonly roomNumber: string;\n  readonly ecoMode: boolean = true;\n\n  constructor(nodeUri: string, ecoMode: boolean) {\n    super();\n    this.setKey(nodeUri);\n    const regexResult = /\\/ship\\/\\w+\\/deck\\/(\\d+)\\/room\\/(\\d+)/.exec(\n      nodeUri\n    ) ?? [null, \"\", \"\"];\n    this.deckNumber = regexResult[1];\n    this.roomNumber = regexResult[2];\n    this.ecoMode = ecoMode;\n  }\n\n  @ViewRef({\n    viewType: CellView,\n    viewKey: \"deck\",\n    get parentView(): View | null {\n      return this.owner.leaf.insertView();\n    },\n    createView(): CellView {\n      return TextCellView.create().set({\n        style: {\n          color: Look.accentColor,\n        },\n      });\n    },\n  })\n  readonly deckCell!: ViewRef<this, CellView>;\n\n  @ViewRef({\n    viewType: CellView,\n    viewKey: \"room\",\n    get parentView(): View | null {\n      return this.owner.leaf.insertView();\n    },\n    createView(): CellView {\n      return TextCellView.create().set({\n        style: {\n          color: Look.accentColor,\n        },\n      });\n    },\n  })\n  readonly roomCell!: ViewRef<this, CellView>;\n\n  @ViewRef({\n    viewType: CellView,\n    viewKey: \"hvacTemp\",\n    get parentView(): View | null {\n      return this.owner.leaf.insertView();\n    },\n    createView(): CellView {\n      return TextCellView.create().set({\n        style: {\n          color: Look.accentColor,\n        },\n      });\n    },\n  })\n  readonly hvacTempCell!: ViewRef<this, CellView>;\n\n  @ViewRef({\n    viewType: CellView,\n    viewKey: \"timeSinceOccupied\",\n    get parentView(): View | null {\n      return this.owner.leaf.insertView();\n    },\n    createView(): CellView {\n      return TextCellView.create().set({\n        style: {\n          color: Look.accentColor,\n        },\n      });\n    },\n  })\n  readonly timeSinceOccupiedCell!: ViewRef<this, CellView>;\n\n  @Property({\n    valueType: Value,\n    value: Value.absent(),\n    didSetValue(value: Value): void {\n      let moodStatus = RoomController.RoomStatusMood.get(\n        this.owner.ecoMode ? RoomStatus.ecoMode : RoomStatus.recentlyOccupied\n      );\n\n      // update content and mood of deckCell\n      const deckCellView = this.owner.deckCell.view as TextCellView | null;\n      if (deckCellView !== null) {\n        deckCellView.set({\n          content: this.owner.deckNumber,\n          classList: [\"deck-cell-view\"],\n        });\n        deckCellView.modifyMood(Feel.default, moodStatus!.moodModifier);\n      }\n\n      // update content and mood of roomCell\n      const roomCellView = this.owner.roomCell.view as TextCellView | null;\n      if (roomCellView !== null) {\n        roomCellView.set({\n          content: this.owner.roomNumber,\n          classList: [\"room-cell-view\"],\n        });\n        roomCellView.modifyMood(Feel.default, moodStatus!.moodModifier);\n      }\n\n      // update content and mood of hvacTempCell\n      const hvacTempCellView = this.owner.hvacTempCell\n        .view as TextCellView | null;\n      if (hvacTempCellView !== null) {\n        const hvacTempValue = value.get(\"hvacTemperature\").numberValue(0);\n        hvacTempCellView.set({\n          content: hvacTempValue.toString(),\n          classList: [\"hvac-temp-cell-view\"],\n        });\n        hvacTempCellView.modifyMood(Feel.default, moodStatus!.moodModifier);\n      }\n\n      // update content and mood of timeSinceOccupiedCell\n      const timeSinceOccupiedCellView = this.owner.timeSinceOccupiedCell\n        .view as TextCellView | null;\n      if (timeSinceOccupiedCellView !== null) {\n        const msSinceOccupied =\n          Date.now() - value.get(\"occupancyDetected\").numberValue(0);\n        const hoursSinceOccupied = Math.floor(msSinceOccupied / 1000 / 60 / 60);\n        const minutesSinceOccupied = Math.floor(\n          (msSinceOccupied / 1000 / 60) % 60\n        );\n        const secondsSinceOccupied = Math.floor((msSinceOccupied / 1000) % 60);\n        let content: string;\n        if (hoursSinceOccupied) {\n          content = `${hoursSinceOccupied}h ${minutesSinceOccupied}m ${secondsSinceOccupied}s`;\n        } else if (minutesSinceOccupied) {\n          content = `${minutesSinceOccupied}m ${secondsSinceOccupied}s`;\n        } else {\n          content = `${secondsSinceOccupied}s`;\n        }\n        timeSinceOccupiedCellView.set({\n          content,\n          classList: [\"time-in-processing-cell-view\"],\n        });\n        timeSinceOccupiedCellView.modifyMood(\n          Feel.default,\n          moodStatus!.moodModifier\n        );\n      }\n    },\n  })\n  readonly stats!: Property<this, Value>;\n\n  private static RoomStatusMood: Map<RoomStatus, Status> = new Map<\n    RoomStatus,\n    Status\n  >([\n    [RoomStatus.recentlyOccupied, Status.improving(0, 1, 2, 3, 4)(1.4)],\n    [RoomStatus.ecoMode, Status.improving(0, 1, 2, 3, 4)(3)],\n    //   [RoomStatus.readyForPickup, Status.improving(0, 1, 2, 3, 4)(3)],\n    //   [RoomStatus.pickupCompleted, Status.unknown()],\n  ]);\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { PanelView } from \"@swim/panel\";\nimport { TimeTableController } from \"@nstream/widget\";\nimport { View, ViewRef } from \"@swim/view\";\nimport { MapDownlink, ValueDownlink } from \"@swim/client\";\nimport { Value } from \"@swim/structure\";\nimport { TraitViewRef } from \"@swim/controller\";\nimport { Trait } from \"@swim/model\";\nimport { ColView, HeaderView, TextColView } from \"@swim/table\";\nimport { ColLayout, TableLayout, TableView } from \"@swim/table\";\nimport { Uri } from \"@swim/uri\";\nimport { Length } from \"@swim/math\";\nimport { Look } from \"@swim/theme\";\nimport { RoomController } from \"./RoomController\";\n\n/** @public */\nexport class RoomListController extends TimeTableController {\n  readonly listEcoMode: boolean;\n\n  constructor(listEcoMode: boolean) {\n    super();\n    this.setKey(\n      `RoomListController-${listEcoMode ? \"ecoMode\" : \"recentlyOccupied\"}`\n    );\n    this.listEcoMode = listEcoMode;\n  }\n\n  @TraitViewRef({\n    extends: true,\n    initView(panelView: PanelView): void {\n      super.initView(panelView);\n\n      // then table stuff\n      this.owner.tablePanel.insertView().set({\n        unitWidth: 1,\n        unitHeight: 1,\n        minFrameHeight: 0,\n        minFrameWidth: 0,\n        style: {\n          marginTop: 48,\n          marginBottom: 24,\n        },\n        classList: [\"rlc-table-panel\"],\n      });\n      this.owner.table.insertView(); // Insert the table when we insert this panel\n      this.owner.header.insertView(); // Insert the table's header when we insert this panel\n    },\n  })\n  override readonly panel!: TraitViewRef<this, Trait, PanelView> &\n    TimeTableController[\"panel\"];\n\n  @ViewRef({\n    extends: true,\n    createView(): HeaderView {\n      const headerView = super.createView() as HeaderView;\n      this.owner.deckCol.insertView(headerView);\n      this.owner.roomCol.insertView(headerView);\n      this.owner.hvacTempCol.insertView(headerView);\n      this.owner.timeInProcessingCol.insertView(headerView);\n      return headerView;\n    },\n  })\n  override readonly header!: ViewRef<this, HeaderView> &\n    TimeTableController[\"header\"];\n\n  @ViewRef({\n    extends: true,\n    initView(tablePanelView: PanelView): void {\n      super.initView(tablePanelView);\n      tablePanelView.set({\n        style: {\n          margin: 0,\n          marginTop: 36,\n        },\n      });\n    },\n  })\n  override readonly tablePanel!: ViewRef<this, PanelView> &\n    TimeTableController[\"tablePanel\"];\n\n  @ViewRef({\n    extends: true,\n    createLayout(): TableLayout {\n      const cols = new Array<ColLayout>();\n      cols.push(\n        ColLayout.create(\"deck\", 1, 1, \"100px\", false, false, Look.accentColor)\n      );\n      cols.push(\n        ColLayout.create(\"room\", 1, 1, \"100px\", false, false, Look.accentColor)\n      );\n      cols.push(\n        ColLayout.create(\n          \"hvacTemp\",\n          1,\n          1,\n          \"100px\",\n          false,\n          false,\n          Look.accentColor\n        )\n      );\n      cols.push(\n        ColLayout.create(\n          \"timeSinceOccupied\",\n          2,\n          2,\n          \"144px\",\n          false,\n          false,\n          Look.accentColor\n        )\n      );\n      return new TableLayout(null, null, null, Length.px(12), cols);\n    },\n  })\n  override readonly table!: ViewRef<this, TableView> &\n    TimeTableController[\"table\"];\n\n  @ViewRef({\n    viewType: ColView,\n    viewKey: \"deck\",\n    get parentView(): View | null {\n      return this.owner.header.attachView();\n    },\n    createView(): ColView {\n      return TextColView.create().set({\n        label: \"Deck\",\n      });\n    },\n  })\n  readonly deckCol!: ViewRef<this, ColView>;\n\n  @ViewRef({\n    viewType: ColView,\n    viewKey: \"room\",\n    get parentView(): View | null {\n      return this.owner.header.attachView();\n    },\n    createView(): ColView {\n      return TextColView.create().set({\n        label: \"Stateroom\",\n      });\n    },\n  })\n  readonly roomCol!: ViewRef<this, ColView>;\n\n  @ViewRef({\n    viewType: ColView,\n    viewKey: \"hvacTemp\",\n    get parentView(): View | null {\n      return this.owner.header.attachView();\n    },\n    createView(): ColView {\n      return TextColView.create().set({\n        label: \"HVAC Temp\",\n      });\n    },\n  })\n  readonly hvacTempCol!: ViewRef<this, ColView>;\n\n  @ViewRef({\n    viewType: ColView,\n    viewKey: \"timeSinceOccupied\",\n    get parentView(): View | null {\n      return this.owner.header.attachView();\n    },\n    createView(): ColView {\n      return TextColView.create().set({\n        label: \"Time Since Occupied\",\n      });\n    },\n  })\n  readonly timeInProcessingCol!: ViewRef<this, ColView>;\n\n  @MapDownlink({\n    laneUri: \"stateRooms\",\n    keyForm: Uri.form(),\n    consumed: true,\n    didUpdate(nodeUri: Uri, value: Value): void {\n      let roomController = this.owner.getChild(\n        nodeUri.pathName,\n        RoomController\n      );\n      let ecoModeEnabled = value.get(\"ecoModeEnabled\").booleanValue(false);\n\n      if (\n        roomController === null &&\n        this.owner.listEcoMode === ecoModeEnabled\n      ) {\n        // create new RoomController (row in list)\n        roomController = new RoomController(\n          nodeUri.toString(),\n          this.owner.listEcoMode\n        );\n\n        // insert leaf of RoomController (row)\n        roomController.leaf.insertView().set({\n          style: {\n            cursor: \"pointer\",\n          },\n        });\n\n        // insert cells into row\n        roomController.deckCell.insertView();\n        roomController.roomCell.insertView();\n        roomController.hvacTempCell.insertView();\n        roomController.timeSinceOccupiedCell.insertView();\n\n        // call .stats() method on controller to populate cells\n        roomController.stats.set(value);\n\n        // add newly created controller this this.series ControllerSet\n        this.owner.series.addController(roomController, null, nodeUri.pathName);\n      }\n\n      // remove roomController if its status does not fit this column anymore\n      if (\n        roomController !== null &&\n        this.owner.listEcoMode !== ecoModeEnabled\n      ) {\n        this.owner.removeChild(nodeUri.pathName);\n      }\n    },\n    didRemove(nodeUri: Uri) {\n      // When an room is removed in the backend, remove it from the list\n      this.owner.removeChild(nodeUri.pathName);\n    },\n  })\n  readonly roomDownlink!: MapDownlink<this, Uri, Value>;\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Trait, TraitRef } from \"@swim/model\";\nimport { TraitViewRef } from \"@swim/controller\";\nimport { PanelView, BoardView, BoardController } from \"@swim/panel\";\nimport { EntityTrait } from \"@nstream/domain\";\nimport { RoomListController } from \"../room\";\nimport { RoomStatus } from \"../types\";\n\n/** @public */\nexport class DeckBoardController extends BoardController {\n  constructor() {\n    super();\n    this.initBoard();\n  }\n\n  protected initBoard(): void {\n    const boardView = this.sheet.attachView();\n    const rootPanelView = boardView.appendChild(PanelView).style.set({\n      margin: 6,\n    });\n\n    // The deck board consists of 2 panels of rooms (the same except they have different statuses)\n    // Each panel takes up the full height of the sheet and 1/2 of the width\n    // We insert each widget by inserting each controller's 'panel'\n\n    const recentlyOccupiedListController = this.appendChild(\n      new RoomListController(false),\n      `List${RoomStatus.recentlyOccupied}`\n    );\n    recentlyOccupiedListController.panel.insertView(rootPanelView).set({\n      unitWidth: 1 / 2,\n      unitHeight: 1,\n      style: {\n        margin: 6,\n      },\n      headerTitle: \"Recently Occupied Staterooms\",\n    });\n\n    const ecoModeListController = this.appendChild(\n      new RoomListController(true),\n      `List${RoomStatus.ecoMode}`\n    );\n    ecoModeListController.panel.insertView(rootPanelView).set({\n      unitWidth: 1 / 2,\n      unitHeight: 1,\n      style: {\n        margin: 6,\n      },\n      headerTitle: \"Staterooms in EcoMode\",\n    });\n  }\n\n  @TraitViewRef({\n    extends: true,\n    viewDidMount(boardView: BoardView): void {\n      this.owner.consume(boardView);\n    },\n    viewWillUnmount(boardView: BoardView): void {\n      this.owner.unconsume(boardView);\n    },\n  })\n  override readonly sheet!: TraitViewRef<this, Trait, BoardView> &\n    BoardController[\"sheet\"];\n\n  @TraitRef({\n    traitType: EntityTrait,\n    inherits: true,\n    initTrait(entityTrait: EntityTrait): void {\n      this.owner.hostUri.bindInlet(entityTrait.hostUri);\n      this.owner.nodeUri.bindInlet(entityTrait.nodeUri);\n    },\n  })\n  readonly entity!: TraitRef<this, EntityTrait>;\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Lazy } from \"@swim/util\";\nimport type { Graphics } from \"@swim/graphics\";\nimport { VectorIcon } from \"@swim/graphics\";\nimport type { SheetController } from \"@swim/sheet\";\nimport { AspectTrait } from \"@nstream/domain\";\nimport { DeckBoardController } from \"./DeckBoardController\";\n\n/** @public */\nexport class DeckAspectTrait extends AspectTrait {\n  constructor() {\n    super();\n    this.id.setIntrinsic(\"portal\");\n    this.title.setIntrinsic(\"Portal\");\n    this.icon.setIntrinsic(DeckAspectTrait.icon);\n  }\n\n  // Define the board controller to be used that will control all the widgets/cards the deck will have\n  // We will use the 'DeckBoardController' which is 2 panels showing the statuses of rooms\n  override createTabController(): SheetController | null {\n    return new DeckBoardController();\n  }\n\n  // The icon to show the 'portal' (at the top - alternative to atlas)\n  @Lazy\n  static get icon(): Graphics {\n    return VectorIcon.create(\n      24,\n      24,\n      \"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"\n    );\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\nimport {Class, Lazy} from \"@swim/util\";\nimport { EntityTrait, EntityTraitObserver } from \"@nstream/domain\";\nimport { Model, TraitModelRef } from \"@swim/model\";\nimport { RoomsRelationTrait } from \"../room/RoomsRelationTrait\";\nimport { Graphics, PolygonIcon } from \"@swim/graphics\";\nimport { DeckAspectTrait } from \"./DeckAspectTrait\";\n\n/** @public */\nexport interface DeckEntityTraitObserver<T extends DeckEntityTrait = DeckEntityTrait> extends EntityTraitObserver<T> {\n}\n\n/** @public */\nexport class DeckEntityTrait extends EntityTrait {\n  constructor() {\n    super();\n    this.icon.setIntrinsic(DeckEntityTrait.icon);\n  }\n\n  override readonly observerType?: Class<DeckEntityTraitObserver>;\n\n  // Aspect/Portal trait showing that this entity will have a board of widgets/cards\n  @TraitModelRef({\n    modelType: Model,\n    modelKey: \"portal\",\n    traitType: DeckAspectTrait,\n    traitKey: \"aspect\",\n  })\n  readonly portal!: TraitModelRef<this, DeckAspectTrait>;\n\n  // Relation trait showing that this entity will have a list of rooms that can be traversed to on the left\n  @TraitModelRef({\n    modelType: Model,\n    modelKey: \"rooms\",\n    traitType: RoomsRelationTrait,\n    traitKey: \"relation\",\n  })\n  readonly roomsRelation!: TraitModelRef<this, RoomsRelationTrait>;\n\n  // The icon of the entity, will be used in the navigation on the left\n  @Lazy\n  static get icon(): Graphics {\n    return PolygonIcon.create(3);\n  }\n\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Strings, Observes, Numbers } from \"@swim/util\";\nimport { type Value } from \"@swim/structure\";\nimport { MapDownlink } from \"@swim/client\";\nimport { TraitModelSet } from \"@swim/model\";\nimport { RelationTrait } from \"@nstream/domain\";\nimport { DeckEntityTrait } from \"./DeckEntityTrait\";\nimport { Uri } from \"@swim/uri\";\n\n/** @public */\nexport class DecksRelationTrait extends RelationTrait<DeckEntityTrait> {\n  constructor() {\n    super();\n    this.title.setIntrinsic(\"Decks\");\n    this.id.setIntrinsic(\"deck\");\n  }\n\n  @TraitModelSet({\n    extends: true,\n    traitType: DeckEntityTrait,\n    observesTrait: true,\n    sorted: true,\n    initTrait(deckTrait: DeckEntityTrait): void {\n      // Create the deck entity\n      const deckId = deckTrait.id.value!;\n      deckTrait.title.setIntrinsic(`Deck ${deckId}`);\n      deckTrait.nodeUri.setIntrinsic(\"/ship/icon/deck/\" + deckId);\n      // Insert the portal (board of widgets) and the roomsRelation (list of rooms to navigate to) into the deck entity\n      deckTrait.portal.insertModel();\n      deckTrait.roomsRelation.insertModel();\n    },\n    compareTraits(a: DeckEntityTrait, b: DeckEntityTrait): number {\n      // Sort the deck navigation by deck number\n      return Numbers.compare(\n        Number.parseInt(a.id.value ?? \"0\"),\n        Number.parseInt(b.id.value ?? \"0\")\n      );\n    },\n  })\n  override readonly entities!: TraitModelSet<this, DeckEntityTrait> &\n    RelationTrait<DeckEntityTrait>[\"entities\"] &\n    Observes<DeckEntityTrait>;\n\n  // Open a downlink to the backend to get the map of decks, we can use this to create the navigation list\n  // The nodeUri of the downlink is inferred from the parent (the ship)\n  @MapDownlink({\n    laneUri: \"decks\",\n    keyForm: Uri.form(),\n    consumed: true,\n    didUpdate(nodeUri: Uri, status: Value): void {\n      // If there is a new deck then insert it into the relation/navigation\n      let deckTrait = this.owner.entities.get(nodeUri.pathName);\n      if (deckTrait === null) {\n        deckTrait = this.owner.entities.createTrait(nodeUri.pathName);\n        deckTrait.nodeUri.set(nodeUri);\n        this.owner.entities.addTrait(deckTrait);\n      }\n    },\n    didRemove(nodeUri: Uri, status: Value): void {\n      // When a deck is removed in the backend, remove it from the navigation/relation\n      this.owner.removeChild(nodeUri.pathName);\n    },\n  })\n  readonly decks!: MapDownlink<this, Uri, Value>;\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\n\nimport { Lazy } from \"@swim/util\";\nimport type { Graphics } from \"@swim/graphics\";\nimport { VectorIcon } from \"@swim/graphics\";\nimport type { SheetController } from \"@swim/sheet\";\nimport { AspectTrait } from \"@nstream/domain\";\nimport { DeckBoardController } from \"../deck\";\n\n/** @public */\nexport class ShipAspectTrait extends AspectTrait {\n  constructor() {\n    super();\n    this.id.setIntrinsic(\"portal\");\n    this.title.setIntrinsic(\"Portal\");\n    this.icon.setIntrinsic(ShipAspectTrait.icon);\n  }\n\n  // Define the board controller to be used that will control all the widgets/cards the ship will have\n  // We will use the 'DeckBoardController' which is 2 panels showing the statuses of a deck's rooms\n  override createTabController(): SheetController | null {\n    return new DeckBoardController().set({\n      nodeUri: \"/ship/icon/deck/3\",\n    });\n  }\n\n  // The icon to show the 'portal' (at the top - alternative to atlas)\n  @Lazy\n  static get icon(): Graphics {\n    return VectorIcon.create(\n      24,\n      24,\n      \"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"\n    );\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n// All rights reserved.\nimport {Class} from \"@swim/util\";\nimport { EntityTrait, EntityTraitObserver } from \"@nstream/domain\";\nimport { DecksRelationTrait } from \"../deck\";\nimport { Model, TraitModelRef } from \"@swim/model\";\nimport { ShipAspectTrait } from \"./ShipAspectTrait\";\n\n/** @public */\nexport interface ShipEntityTraitObserver<T extends ShipEntityTrait = ShipEntityTrait> extends EntityTraitObserver<T> {\n}\n\n/** @public */\nexport class ShipEntityTrait extends EntityTrait {\n  constructor() {\n    super();\n    this.title.setIntrinsic(\"ship/icon\");\n  }\n\n  declare readonly observerType?: Class<ShipEntityTraitObserver>;\n\n  // Aspect/Portal trait showing that this entity will have a board of widgets/cards\n  @TraitModelRef({\n    modelType: Model,\n    modelKey: \"portal\",\n    traitType: ShipAspectTrait,\n    traitKey: \"aspect\",\n  })\n  readonly portal!: TraitModelRef<this, ShipAspectTrait>;\n\n  // Relation trait showing that this entity will have a list of decks that can be traversed to on the left\n  @TraitModelRef({\n    modelType: Model,\n    modelKey: \"decks\",\n    traitType: DecksRelationTrait,\n    traitKey: \"relation\",\n  })\n  readonly decksRelation!: TraitModelRef<this, DecksRelationTrait>;\n\n}\n"],"names":["__esDecorate","ctor","descriptorIn","decorators","contextIn","initializers","extraInitializers","accept","f","TypeError","kind","key","target","prototype","descriptor","Object","getOwnPropertyDescriptor","name","_","done","i","length","context","p","access","addInitializer","push","result","get","set","init","unshift","defineProperty","__runInitializers","thisArg","value","useValue","arguments","call","SuppressedError","error","suppressed","message","e","Error","RoomDetailsController","TimeTableController","_a","_classSuper","constructor","super","this","detailsContainer","_instanceExtraInitializers","_detailsContainer_initializers","shipCode","_shipCode_initializers","deckNumber","_deckNumber_initializers","roomNumber","_roomNumber_initializers","hvacUnit","_hvacUnit_initializers","hvacZone","_hvacZone_initializers","infoDownlink","_infoDownlink_initializers","initView","panel","insertView","_detailsContainer_decorators","ViewRef","viewType","HtmlView","extends","parentView","owner","attachView","createView","divView","document","createElement","style","margin","classList","shipCodeView","appendChild","marginTop","marginBottom","fontSize","fontFamily","node","innerText","valueOf","deckNumberView","roomNumberView","hvacUnitView","hvacZoneView","_shipCode_decorators","Property","valueType","String","_deckNumber_decorators","_roomNumber_decorators","_hvacUnit_decorators","_hvacZone_decorators","_infoDownlink_decorators","ValueDownlink","hostUri","laneUri","consumed","didSet","_b","view","getChild","setValue","stringValue","static","private","has","obj","metadata","_metadata","RoomBoardController","BoardController","sheet","_sheet_initializers","_panel_initializers","entity","_entity_initializers","initBoard","rootPanelView","roomDetailsController","_sheet_decorators","TraitViewRef","viewDidMount","boardView","consume","viewWillUnmount","unconsume","_panel_decorators","PanelView","create","backgroundColor","_entity_decorators","TraitRef","traitType","EntityTrait","inherits","initTrait","entityTrait","bindInlet","nodeUri","RoomAspectTrait","AspectTrait","id","setIntrinsic","title","icon","createTabController","VectorIcon","Lazy","_static_get_icon_decorators","_staticExtraInitializers","RoomEntityTrait","observerType","portal","_portal_initializers","_portal_decorators","TraitModelRef","modelType","Model","modelKey","traitKey","RoomsRelationTrait","RelationTrait","entities","_entities_initializers","rooms","_rooms_initializers","_entities_decorators","TraitModelSet","observesTrait","sorted","roomTrait","roomId","roomTraitNodeUri","insertModel","compareTraits","a","b","Numbers","compare","Number","parseInt","_c","_rooms_decorators","MapDownlink","keyForm","Uri","form","didUpdate","status","pathName","createTrait","addTrait","didRemove","removeChild","OrderType","RoomStatus","RoomController","TimeSeriesController","ecoMode","deckCell","_deckCell_initializers","roomCell","_roomCell_initializers","hvacTempCell","_hvacTempCell_initializers","timeSinceOccupiedCell","_timeSinceOccupiedCell_initializers","stats","_stats_initializers","setKey","regexResult","exec","_deckCell_decorators","CellView","viewKey","leaf","TextCellView","color","Look","accentColor","_roomCell_decorators","_hvacTempCell_decorators","_timeSinceOccupiedCell_decorators","_stats_decorators","Value","absent","didSetValue","moodStatus","RoomStatusMood","recentlyOccupied","deckCellView","content","modifyMood","Feel","default","moodModifier","roomCellView","hvacTempCellView","hvacTempValue","numberValue","toString","timeSinceOccupiedCellView","msSinceOccupied","Date","now","hoursSinceOccupied","Math","floor","minutesSinceOccupied","secondsSinceOccupied","Map","Status","improving","RoomListController","listEcoMode","header","_header_initializers","tablePanel","_tablePanel_initializers","table","_table_initializers","deckCol","_deckCol_initializers","roomCol","_roomCol_initializers","hvacTempCol","_hvacTempCol_initializers","timeInProcessingCol","_timeInProcessingCol_initializers","roomDownlink","_roomDownlink_initializers","panelView","unitWidth","unitHeight","minFrameHeight","minFrameWidth","_header_decorators","headerView","_tablePanel_decorators","tablePanelView","_table_decorators","createLayout","cols","Array","ColLayout","TableLayout","Length","px","_deckCol_decorators","ColView","TextColView","label","_roomCol_decorators","_hvacTempCol_decorators","_timeInProcessingCol_decorators","_roomDownlink_decorators","roomController","ecoModeEnabled","booleanValue","cursor","series","addController","DeckBoardController","recentlyOccupiedListController","headerTitle","ecoModeListController","DeckAspectTrait","DeckEntityTrait","roomsRelation","_roomsRelation_initializers","PolygonIcon","_roomsRelation_decorators","DecksRelationTrait","decks","_decks_initializers","deckTrait","deckId","_decks_decorators","ShipAspectTrait","ShipEntityTrait","decksRelation","_decksRelation_initializers","_decksRelation_decorators"],"mappings":"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"}